(this["webpackJsonpseasons-client"]=this["webpackJsonpseasons-client"]||[]).push([[0],{31:function(e,t,a){e.exports=a(72)},36:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(25),r=a.n(c),s=(a(36),a(30)),i=a(8),l=a(1),u=a(13),d=Object(n.createContext)(null),p={isLoggedIn:JSON.parse(localStorage.getItem("isLoggedIn"))||!1,user:JSON.parse(localStorage.getItem("user"))||null},g=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("isLoggedIn",JSON.stringify(t.payload.isLoggedIn)),localStorage.setItem("user",JSON.stringify(t.payload.user)),console.log(t.payload.isLoggedIn),Object(u.a)({},e,{isLoggedIn:t.payload.isLoggedIn,user:t.payload.user});case"LOGOUT":return localStorage.clear(),Object(u.a)({},e,{isLoggedIn:!1,user:null});default:return e}},m=Object.freeze({clientId:"86005f0ec38b4eb098c3d6bce07ca659",redirectUri:"https://binhrobles.com/spotify-seasons-client/#/callback",backendUrl:"https://lin8xmad5k.execute-api.us-west-2.amazonaws.com/prod",scope:"user-read-private user-read-email"});function f(){var e=o.a.useContext(d),t=e.state;e.dispatch;if(!t.isLoggedIn)return o.a.createElement("a",{href:"https://accounts.spotify.com/authorize?client_id=".concat(m.clientId,"&response_type=code&redirect_uri=").concat(encodeURIComponent(m.redirectUri),"&scope=").concat(m.scope),onClick:function(){}},o.a.createElement("span",null,"Authorize with Spotify"));var a=t.user.name;return o.a.createElement("div",null,"Hello ",a)}var h=a(9),b=a.n(h),v=a(26),I=a(27),y=a.n(I),O=a(28),w=a.n(O);function E(){var e=o.a.useContext(d),t=(e.state,e.dispatch,Object(l.f)());o.a.useEffect((function(){t.search&&Object(v.a)(b.a.mark((function e(){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=w.a.parse(t.search)).code){e.next=6;break}return e.next=4,y.a.post("".concat(m.backendUrl,"/user"),{code:a.code});case 4:n=e.sent,console.log(n);case 6:case"end":return e.stop()}}),e)})))()}),[t]);return o.a.createElement("div",null,"Logging you in...")}var k=function(){var e=Object(n.useReducer)(g,p),t=Object(s.a)(e,2),a=t[0],c=t[1];return o.a.createElement(d.Provider,{value:{state:a,dispatch:c}},o.a.createElement(i.a,{basename:"/"},o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/callback",component:E}),o.a.createElement(l.a,{path:"/",component:f}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.3cc23cec.chunk.js.map